import{j as e,r as m,k,B as S,L as E}from"./index-22fa25b4.js";import{C as h}from"./CloseIcon-b6bdee7b.js";import{C as F}from"./CloseCross-a7d4286a.js";const L="_register_14onm_37",q="_register__container_14onm_59",z="_register__content_14onm_62",I="_register__sendform_14onm_145",O="_register__login_14onm_158",R="_overlay_14onm_165",n={register:L,"register__close-button":"_register__close-button_14onm_52",register__container:q,register__content:z,"input-group":"_input-group_14onm_108","input-group_name":"_input-group_name_14onm_114","error-input":"_error-input_14onm_122","error-message":"_error-message_14onm_125","close-icon":"_close-icon_14onm_133","eye-icon":"_eye-icon_14onm_134",register__sendform:I,register__login:O,overlay:R},b=({onClick:p,isOpen:d})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20",viewBox:"0 0 28 25",fill:"none",onClick:p,children:e.jsxs("g",{id:"Group",children:[e.jsx("path",{id:"Subtract",fillRule:"evenodd",clipRule:"evenodd",d:d?"M14 12c0 1.103-.897 2-2 2s-2-.897-2-2 .897-2 2-2 2 .897 2 2zm10-.449s-4.252 7.449-11.985 7.449c-7.18 0-12.015-7.449-12.015-7.449s4.446-6.551 12.015-6.551c7.694 0 11.985 6.551 11.985 6.551zm-8 .449c0-2.208-1.791-4-4-4-2.208 0-4 1.792-4 4 0 2.209 1.792 4 4 4 2.209 0 4-1.791 4-4z":"M22.0778 20.4982C23.497 19.2883 24.6507 18.0135 25.4408 17.0542C26.0069 16.3669 26.2899 16.0233 26.2899 15.5C26.2899 14.9767 26.0069 14.6331 25.4408 13.9458C23.3699 11.4315 18.8021 6.75 13.4999 6.75C12.0212 6.75 10.5996 7.11412 9.27339 7.69381L12.7659 11.1863C13.0046 11.146 13.2498 11.125 13.4999 11.125C15.9162 11.125 17.8749 13.0838 17.8749 15.5C17.8749 15.7501 17.854 15.9954 17.8136 16.234L22.0778 20.4982ZM19.634 22.297L16.2443 18.9074C15.4938 19.5126 14.5392 19.875 13.4999 19.875C11.0837 19.875 9.12494 17.9162 9.12494 15.5C9.12494 14.4608 9.4873 13.5061 10.0926 12.7556L6.5662 9.22925C4.38738 10.7456 2.63577 12.6386 1.55907 13.9458C0.992996 14.6331 0.709961 14.9767 0.709961 15.5C0.709961 16.0233 0.992995 16.3669 1.55906 17.0542C3.63003 19.5685 8.19783 24.25 13.4999 24.25C15.7157 24.25 17.8033 23.4324 19.634 22.297Z",fill:"#949494"}),d?null:e.jsx("path",{id:"Vector",d:"M3.29199 0.916992L26.6253 24.2503",stroke:"#949494",strokeWidth:"2"})]})}),Z=()=>{const[p,d]=m.useState(!0),_=k(),v=()=>{d(!1),_("/")};m.useEffect(()=>{const a=r=>{const s=document.getElementById("register-container");console.log(s),s&&!s.contains(r.target)&&(d(!1),_("/"))};return p&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[p,_]);const[t,c]=m.useState({name:"",surname:"",town:"",email:"",phone:"",password:"",passwordConfirmation:""}),[i,o]=m.useState({name:"",surname:"",town:"",email:"",phone:"",password:"",passwordConfirmation:""}),l=a=>{const{name:r,value:s}=a.target;console.log(s),c(u=>({...u,[r]:s})),o(u=>({...u,email:""})),o(u=>({...u,phone:""})),j(r,s)},x=()=>{y(a=>!a)},N=()=>{Object.entries(t).forEach(([a,r])=>{j(a,r)})},j=(a,r)=>{switch(a){case"name":case"surname":r.trim()?/^[A-Za-z-]+$/.test(r)?r.length>30?o(s=>({...s,[a]:"Это поле можеть быть не более 30 символов"})):o(s=>({...s,[a]:""})):o(s=>({...s,[a]:"Это поле может содержать прописные и заглавные буквы латинского алфавита и дефис"})):o(s=>({...s,[a]:"Это поле - обязательное"}));break;case"email":r.trim()?/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/.test(r)?o(s=>({...s,email:""})):o(s=>({...s,email:"Проверьте правильность введенной почты"})):o(s=>({...s,email:"E-mail - обязательное поле"}));break;case"phone":r.trim()?/^\d+$/.test(r)?o(s=>({...s,phone:""})):o(s=>({...s,phone:"Телефон должен содержать только цифры"})):o(s=>({...s,phone:"Телефон - обязательное поле"}));break;case"town":r.trim()?o(s=>({...s,town:""})):o(s=>({...s,town:"Город - обязательное поле"}));break;case"password":r.trim()?o(s=>({...s,password:""})):o(s=>({...s,password:"Пароль - обязательное поле"}));break}},[w,C]=m.useState(!1),[g,y]=m.useState(!1),f=async a=>{if(a.preventDefault(),N(),!Object.values(i).some(r=>r!==""))try{C(!0);const r=await fetch("http://localhost:8000/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){const s=await r.json();console.log(s)}else{const s=await r.text();console.error("Error submitting form:",r.status,s)}}catch(r){console.error("Error submitting form:",r)}finally{C(!1)}};return e.jsx(e.Fragment,{children:p&&e.jsx("div",{className:n.overlay,children:e.jsx("section",{id:"register-container",className:n.register,children:e.jsxs("div",{className:n.register__container,children:[e.jsx(F,{className:n["register__close-button"],onClick:v}),e.jsxs("form",{className:n.register__content,onSubmit:f,children:[e.jsx("h1",{children:"Регистрация"}),e.jsx("p",{children:"Поля, отмеченные *, обязательны для заполнения"}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:"text",name:"name",id:"inputname",placeholder:"Имя*",value:t.name,onChange:l,required:!0,className:i.name?n["error-input"]:""}),e.jsx("span",{className:n["error-message"],children:i.name}),e.jsx("label",{htmlFor:"inputname",children:t.name&&e.jsx(h,{onClick:()=>c({...t,name:""})})})]}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:"text",name:"surname",id:"inputsurname",placeholder:"Фамилия*",value:t.surname,onChange:l,required:!0,className:i.surname?n["error-input"]:""}),e.jsx("span",{className:n["error-message"],children:i.surname}),e.jsx("label",{htmlFor:"inputsurname",children:t.surname&&e.jsx(h,{onClick:()=>c({...t,surname:""})})})]}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:"text",name:"town",id:"inputtown",placeholder:"Город*",value:t.town,onChange:l,required:!0,className:i.town?n["error-input"]:""}),e.jsx("span",{className:n["error-message"],children:i.town}),e.jsx("label",{htmlFor:"inputtown",children:t.town&&e.jsx(h,{onClick:()=>c({...t,town:""})})})]}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:"email",name:"email",id:"inputemail",placeholder:"E-mail*",value:t.email,onChange:l,required:!0,className:i.email?n["error-input"]:""}),e.jsx("span",{className:n["error-message"],children:i.email&&i.email}),e.jsx("label",{htmlFor:"inputemail",children:t.email&&e.jsx(h,{onClick:()=>c({...t,email:""})})})]}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:"phone",name:"phone",placeholder:"Телефон*",value:t.phone,onChange:l,required:!0,className:i.phone?n["error-input"]:""}),e.jsx("span",{className:n["error-message"],children:i.phone&&i.phone}),e.jsx("label",{htmlFor:"inputphone",children:t.phone&&e.jsx(h,{onClick:()=>c({...t,phone:""})})})]}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:g?"text":"password",id:"inputpassword",name:"password",placeholder:"Пароль*",value:t.password,onChange:l,required:!0,className:i.password?n["error-input"]:""}),e.jsx("label",{htmlFor:"inputpassword",children:t.password&&e.jsx(b,{onClick:x,isOpen:g})})]}),e.jsxs("div",{className:n["input-group"],children:[e.jsx("input",{type:g?"text":"password",id:"inputpasswordconf",name:"passwordConfirmation",placeholder:"Повторите пароль*",onChange:l,required:!0,className:i.password?n["error-input"]:""}),e.jsx("label",{htmlFor:"inputpassword",children:t.password&&e.jsx(b,{onClick:x,isOpen:g})})]}),e.jsx(S,{type:"submit",disabled:w,onSubmit:f,children:w?"Загрузка...":"Зарегистрироваться"}),e.jsx("div",{className:n.register__sendform,children:e.jsxs("span",{children:["Нажимая на зарегистрироваться, вы даете свое"," ",e.jsx("span",{children:e.jsx("a",{href:"#",children:"согласие на обработку персональных данных"})})]})}),e.jsxs("div",{className:n.register__login,children:[e.jsx("span",{children:"Уже есть аккаунт?"}),e.jsx("span",{children:e.jsx(E,{to:"/login",children:"Войти"})})]})]})]})})})})},A=()=>e.jsx(e.Fragment,{children:e.jsx(Z,{})}),P=A;export{P as default};
